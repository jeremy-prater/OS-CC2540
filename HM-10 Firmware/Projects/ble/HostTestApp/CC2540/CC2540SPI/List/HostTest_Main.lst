###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.30.1.41636 for 8051             02/Jun/2014  22:55:58 #
# Copyright 2004-2013 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#                                                                             #
#    Source file        =  c:\Users\Administrator\Documents\Dropbox\Fish      #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\Source\HostTest_Main.c                      #
#    Command line       =  -f "c:\Users\Administrator\Documents\Dropbox\Fish  #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\..\..\config\buildComponents.cfg"    #
#                          (-DBROADCASTER_CFG=0x01 -DOBSERVER_CFG=0x02        #
#                          -DPERIPHERAL_CFG=0x04 -DCENTRAL_CFG=0x08           #
#                          -DADV_NCONN_CFG=0x01 -DADV_CONN_CFG=0x02           #
#                          -DSCAN_CFG=0x04 -DINIT_CFG=0x08                    #
#                          -DADV_CFG=ADV_NCONN_CFG+ADV_CONN_CFG               #
#                          -DLINK_CFG=ADV_CONN_CFG+INIT_CFG                   #
#                          -DFULL_CFG=INIT_CFG+SCAN_CFG+ADV_NCONN_CFG+ADV_CON #
#                          N_CFG) -f "c:\Users\Administrator\Documents\Dropbo #
#                          x\Fish Brain\HM-10 Hack\HM-10                      #
#                          Firmware\Projects\ble\HostTestApp\CC2540\buildConf #
#                          ig.cfg" (-DHOST_CONFIG=PERIPHERAL_CFG+CENTRAL_CFG  #
#                          -DGAP_PRIVACY_RECONNECT)                           #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\Source\HostTest_Main.c" -D                  #
#                          INT_HEAP_LEN=2700 -D HALNODEBUG -D                 #
#                          OSAL_CBTIMER_NUM_TASKS=1 -D POWER_SAVING -D        #
#                          HAL_AES_DMA=TRUE -D HAL_DMA=TRUE -D HAL_UART=TRUE  #
#                          -D HAL_UART_DMA=0 -D HAL_UART_ISR=0 -D             #
#                          HAL_UART_SPI=2 -D HAL_SPI_QUEUED_TX=TRUE -D        #
#                          HAL_KEY=FALSE -D HAL_LCD=FALSE -D HAL_LED=FALSE    #
#                          -D GATT_DB_OFF_CHIP -D GAP_BOND_MGR -lCN           #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\CC2540SPI\List\" -lA                 #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\CC2540SPI\List\" -o                  #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\CC2540SPI\Obj\" -e --debug           #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 8 -I "c:\Users\Administrator\Doc #
#                          uments\Dropbox\Fish Brain\HM-10 Hack\HM-10         #
#                          Firmware\Projects\ble\HostTestApp\CC2540\..\..\com #
#                          mon\" -I "c:\Users\Administrator\Documents\Dropbox #
#                          \Fish Brain\HM-10 Hack\HM-10                       #
#                          Firmware\Projects\ble\HostTestApp\CC2540\..\..\..\ #
#                          ..\Components\hal\include\" -I                     #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\..\..\..\..\Components\hal\target\CC #
#                          2540EB\" -I "c:\Users\Administrator\Documents\Drop #
#                          box\Fish Brain\HM-10 Hack\HM-10                    #
#                          Firmware\Projects\ble\HostTestApp\CC2540\..\..\..\ #
#                          ..\Components\osal\include\" -I                    #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\..\..\..\..\Components\services\sadd #
#                          r\" -I "c:\Users\Administrator\Documents\Dropbox\F #
#                          ish Brain\HM-10 Hack\HM-10                         #
#                          Firmware\Projects\ble\HostTestApp\CC2540\..\..\..\ #
#                          ..\Components\ble\include\" -I                     #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\..\..\..\..\Components\ble\controlle #
#                          r\phy\" -I "c:\Users\Administrator\Documents\Dropb #
#                          ox\Fish Brain\HM-10 Hack\HM-10                     #
#                          Firmware\Projects\ble\HostTestApp\CC2540\..\..\..\ #
#                          ..\Components\ble\controller\include\" -I          #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\..\..\..\..\Components\ble\hci\" -I  #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\..\..\..\..\Components\ble\host\"    #
#                          -I "c:\Users\Administrator\Documents\Dropbox\Fish  #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\..\..\common\cc2540\" -I             #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\..\..\common\npi\npi_np\" -I         #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\..\..\Include\" -I                   #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\..\..\Profiles\Roles\" -I            #
#                          "c:\Users\Administrator\Documents\Dropbox\Fish     #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\..\source\" -Ohz                     #
#    List file          =  c:\Users\Administrator\Documents\Dropbox\Fish      #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\CC2540SPI\List\HostTest_Main.lst     #
#    Object file        =  c:\Users\Administrator\Documents\Dropbox\Fish      #
#                          Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostT #
#                          estApp\CC2540\CC2540SPI\Obj\HostTest_Main.r51      #
#                                                                             #
#                                                                             #
###############################################################################

c:\Users\Administrator\Documents\Dropbox\Fish Brain\HM-10 Hack\HM-10 Firmware\Projects\ble\HostTestApp\Source\HostTest_Main.c
      1          /**************************************************************************************************
      2            Filename:       HostTest_Main.c
      3            Revised:        $Date: 2012-08-31 11:31:40 -0700 (Fri, 31 Aug 2012) $
      4            Revision:       $Revision: 31449 $
      5          
      6            Description:    This file contains the main and callback functions
      7          
      8          
      9            Copyright 2009-2012 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /**************************************************************************************************
     41           *                                           Includes
     42           **************************************************************************************************/
     43          /* Hal Drivers */
     44          #include "hal_types.h"
     45          #include "hal_key.h"

   \                                 In  segment SFR_AN, at 0x9d
   \   unsigned char volatile __sfr SLEEPSTA
   \                     SLEEPSTA:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x9e
   \   unsigned char volatile __sfr CLKCONSTA
   \                     CLKCONSTA:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa0
   \   union <unnamed> volatile __sfr _A_P2
   \                     _A_P2:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xbe
   \   unsigned char volatile __sfr SLEEPCMD
   \                     SLEEPCMD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc6
   \   unsigned char volatile __sfr CLKCONCMD
   \                     CLKCONCMD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xff
   \   unsigned char volatile __sfr P2DIR
   \                     P2DIR:
   \   000000                DS 1
     46          #include "hal_timer.h"
     47          #include "hal_drivers.h"
     48          #include "hal_led.h"
     49          #include "spi_interface.h"
     50          
     51          /* OSAL */
     52          #include "OSAL.h"
     53          #include "OSAL_Tasks.h"
     54          #if defined POWER_SAVING
     55          #include "OSAL_PwrMgr.h"
     56          #endif
     57          #include "osal_snv.h"
     58          
     59          /**************************************************************************************************
     60           * FUNCTIONS
     61           **************************************************************************************************/
     62          
     63          /* This callback is triggered when a key is pressed */
     64          void MSA_Main_KeyCallback(uint8 keys, uint8 state);
     65          
     66          /**************************************************************************************************
     67           * @fn          main
     68           *
     69           * @brief       Start of application.
     70           *
     71           * @param       none
     72           *
     73           * @return      none
     74           **************************************************************************************************
     75           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     76          int main(void)
   \                     main:
     77          {
   \   000000                ; Auto size: 0
     78            /* Initialize hardware */
     79            HAL_BOARD_INIT();
   \   000000   53BEFB       ANL     0xbe,#0xfb
   \                     ??main_0:
   \   000003   E59D         MOV     A,0x9d
   \   000005   A2E6         MOV     C,0xE0 /* A   */.6
   \   000007   50FA         JNC     ??main_0
   \   000009   E5C6         MOV     A,0xc6
   \   00000B   5480         ANL     A,#0x80
   \   00000D   4449         ORL     A,#0x49
   \   00000F   F5C6         MOV     0xc6,A
   \                     ??main_1:
   \   000011   E59E         MOV     A,0x9e
   \   000013   547F         ANL     A,#0x7f
   \   000015   6449         XRL     A,#0x49
   \   000017   70F8         JNZ     ??main_1
   \   000019   53C67F       ANL     0xc6,#0x7f
   \                     ??main_2:
   \   00001C   E59E         MOV     A,0x9e
   \   00001E   A2E7         MOV     C,0xE0 /* A   */.7
   \   000020   40FA         JC      ??main_2
   \   000022   53C680       ANL     0xc6,#0x80
   \                     ??main_3:
   \   000025   E59E         MOV     A,0x9e
   \   000027   547F         ANL     A,#0x7f
   \   000029   70FA         JNZ     ??main_3
   \   00002B   43BE04       ORL     0xbe,#0x4
   \   00002E   906270       MOV     DPTR,#0x6270
   \   000031   7408         MOV     A,#0x8
   \   000033   F0           MOVX    @DPTR,A
     80          
     81            /* Initialze the HAL driver */
     82            HalDriverInit();
   \   000034                ; Setup parameters for call to function HalDriverInit
   \   000034   12....       LCALL   ??HalDriverInit?relay; Banked call to: HalDriverInit
     83          
     84            STATUS_LED_DIR |= STATUS_LED_BIT;
   \   000037   43FF02       ORL     0xff,#0x2
     85            STATUS_LED_PIN = 0;
   \   00003A   C2A1         CLR     0xa0.1
     86          
     87            /* Initialize NV system */
     88            osal_snv_init();
   \   00003C                ; Setup parameters for call to function osal_snv_init
   \   00003C   12....       LCALL   ??osal_snv_init?relay; Banked call to: osal_snv_init
     89          
     90            /* Initialize the operating system */
     91            osal_init_system();
   \   00003F                ; Setup parameters for call to function osal_init_system
   \   00003F   12....       LCALL   ??osal_init_system?relay; Banked call to: osal_init_system
     92          
     93            /* Enable interrupts */
     94            HAL_ENABLE_INTERRUPTS();
   \   000042   D2AF         SETB    0xa8.7
     95          
     96          #if defined POWER_SAVING
     97            osal_pwrmgr_device( PWRMGR_BATTERY );
   \   000044                ; Setup parameters for call to function osal_pwrmgr_device
   \   000044   7901         MOV     R1,#0x1
   \   000046   12....       LCALL   ??osal_pwrmgr_device?relay; Banked call to: osal_pwrmgr_device
     98          #endif
     99          
    100            /* Start OSAL */
    101            osal_start_system(); // No Return from here
   \   000049                ; Setup parameters for call to function osal_start_system
   \   000049   12....       LCALL   ??osal_start_system?relay; Banked call to: osal_start_system
    102          
    103            return 0;
   \   00004C   7A00         MOV     R2,#0x0
   \   00004E   7B00         MOV     R3,#0x0
   \   000050   02....       LJMP    ?BRET
   \   000053                REQUIRE SLEEPCMD
   \   000053                REQUIRE SLEEPSTA
   \   000053                REQUIRE CLKCONCMD
   \   000053                REQUIRE CLKCONSTA
   \   000053                REQUIRE P2DIR
   \   000053                REQUIRE _A_P2
   \   000053                REQUIRE _A_IEN0
    104          }
    105          
    106          /**************************************************************************************************
    107                                                     CALL-BACKS
    108          **************************************************************************************************/
    109          
    110          
    111          /**************************************************************************************************
    112           * @fn      MSA_Main_KeyCallback
    113           *
    114           * @brief   Callback service for keys
    115           *
    116           * @param   keys  - keys that were pressed
    117           *          state - shifted
    118           *
    119           * @return  void
    120           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    121          void MSA_Main_KeyCallback(uint8 keys, uint8 state)
   \                     MSA_Main_KeyCallback:
    122          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    123            /* Key callbacks */
    124          }
   \   000000   02....       LJMP    ?BRET

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??main?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    main

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MSA_Main_KeyCallback?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MSA_Main_KeyCallback
    125          
    126          /*************************************************************************************************
    127          **************************************************************************************************/

   Maximum stack usage in bytes:

   ISTACK Function
   ------ --------
      0   MSA_Main_KeyCallback
      0   main
        0   -> HalDriverInit
        0   -> osal_init_system
        0   -> osal_pwrmgr_device
        0   -> osal_snv_init
        0   -> osal_start_system


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       6  ??MSA_Main_KeyCallback?relay
       6  ??main?relay
       1  CLKCONCMD
       1  CLKCONSTA
       3  MSA_Main_KeyCallback
       1  P2DIR
       1  SLEEPCMD
       1  SLEEPSTA
       1  _A_IEN0
       1  _A_P2
      83  main

 
 86 bytes in segment BANKED_CODE
 12 bytes in segment BANK_RELAYS
  7 bytes in segment SFR_AN
 
 98 bytes of CODE memory
  0 bytes of DATA memory (+ 7 bytes shared)

Errors: none
Warnings: none
